trigger:
- master

pool:
  name: 'Default'  # Gunakan pool agen yang sesuai dengan self-hosted agent Anda

steps:
# Checkout code dari repository GitHub
- task: Checkout@1
  inputs:
    repository: 'self'  # Repository default (GitHub)
    clean: true  # Membersihkan file kerja sebelum checkout

- task: NodeTool@0
  displayName: 'Install Node.js'
  inputs:
    versionSpec: '22.10.0'

- script: |
    npm install
    npx eslint .
  displayName: 'Run ESLint for Code Quality'
  continueOnError: false

- task: dependency-check-build-task@6
  inputs:
    projectName: 'belajarDevops'
    format: 'JSON'
    scanPath: '$(Build.SourcesDirectory)/src'

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifacts'
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'dependency-check-report'
    publishLocation: 'Container'
